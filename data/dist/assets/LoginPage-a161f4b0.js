import{x as Re,aU as Pe,aV as jt,aL as wt,r as w,ab as Ce,ac as F,u as P,aN as X,ad as lt,D as Ne,aa as Be,aW as Pt,aX as Tt,aY as Ft,aZ as q,s as Ct,o as ge,c as Nt,w as W,b as j,q as qe,Q as Ge,n as Bt,j as ke,d as kt,t as It,U as Rt,f as Ut,m as Y,Z as ot,a_ as Mt,E as We,R as Ye,y as Ke,B as Ze}from"./index-f4130869.js";import{a as zt,L as Qe}from"./md5-aca119df.js";import{u as Ie}from"./customizer-b207e117.js";import"./astrbot_logo_mini-3d1805c3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./config-aff687d2.js";/**
  * vee-validate v4.11.3
  * (c) 2023 Abdelrahman Awad
  * @license MIT
  */function k(e){return typeof e=="function"}function ut(e){return e==null}const ee=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ue(e){return Number(e)>=0}function Dt(e){return typeof e=="object"&&e!==null}function Lt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function $t(e){if(!Dt(e)||Lt(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function be(e,t){return Object.keys(t).forEach(n=>{if($t(t[n])){e[n]||(e[n]={}),be(e[n],t[n]);return}e[n]=t[n]}),e}function ye(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let i=1;i<t.length;i++){if(Ue(t[i])){n+=`[${t[i]}]`;continue}n+=`.${t[i]}`}return n}const xt={};function Ht(e){return xt[e]}const qt=Symbol("vee-validate-form"),Gt=typeof window<"u";function Wt(e){return k(e)&&!!e.__locatorRef}function te(e){return!!e&&k(e.parse)&&e.__type==="VVTypedSchema"}function st(e){return!!e&&k(e.validate)}function Yt(e){return e==="checkbox"||e==="radio"}function Kt(e){return ee(e)||Array.isArray(e)}function Zt(e){return Array.isArray(e)?e.length===0:ee(e)&&Object.keys(e).length===0}function _e(e){return/^\[.+\]$/i.test(e)}function Qt(e){return ct(e)&&e.multiple}function ct(e){return e.tagName==="SELECT"}function dt(e){return Me(e)&&e.target&&"submit"in e.target}function Me(e){return e?!!(typeof Event<"u"&&k(Event)&&e instanceof Event||e&&e.srcElement):!1}function ce(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,l;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!ce(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!ce(i[1],t.get(i[0])))return!1;return!0}if(Xe(e)&&Xe(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(l=Object.keys(e),n=l.length,i=n;i--!==0;){var o=l[i];if(!ce(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Xe(e){return Gt?e instanceof File:!1}function Je(e,t,n){typeof n.value=="object"&&(n.value=V(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function V(e){if(typeof e!="object")return e;var t=0,n,i,l,o=Object.prototype.toString.call(e);if(o==="[object Object]"?l=Object.create(e.__proto__||null):o==="[object Array]"?l=Array(e.length):o==="[object Set]"?(l=new Set,e.forEach(function(d){l.add(V(d))})):o==="[object Map]"?(l=new Map,e.forEach(function(d,m){l.set(V(m),V(d))})):o==="[object Date]"?l=new Date(+e):o==="[object RegExp]"?l=new RegExp(e.source,e.flags):o==="[object DataView]"?l=new e.constructor(V(e.buffer)):o==="[object ArrayBuffer]"?l=e.slice(0):o.slice(-6)==="Array]"&&(l=new e.constructor(e)),l){for(i=Object.getOwnPropertySymbols(e);t<i.length;t++)Je(l,i[t],Object.getOwnPropertyDescriptor(e,i[t]));for(t=0,i=Object.getOwnPropertyNames(e);t<i.length;t++)Object.hasOwnProperty.call(l,n=i[t])&&l[n]===e[n]||Je(l,n,Object.getOwnPropertyDescriptor(e,n))}return l||e}function ze(e){return _e(e)?e.replace(/\[|\]/gi,""):e}function M(e,t,n){return e?_e(t)?e[ze(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((l,o)=>Kt(l)&&o in l?l[o]:n,e):n}function G(e,t,n){if(_e(t)){e[ze(t)]=n;return}const i=t.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let o=0;o<i.length;o++){if(o===i.length-1){l[i[o]]=n;return}(!(i[o]in l)||ut(l[i[o]]))&&(l[i[o]]=Ue(i[o+1])?[]:{}),l=l[i[o]]}}function Te(e,t){if(Array.isArray(e)&&Ue(t)){e.splice(Number(t),1);return}ee(e)&&delete e[t]}function et(e,t){if(_e(t)){delete e[ze(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let o=0;o<n.length;o++){if(o===n.length-1){Te(i,n[o]);break}if(!(n[o]in i)||ut(i[n[o]]))break;i=i[n[o]]}const l=n.map((o,d)=>M(e,n.slice(0,d).join(".")));for(let o=l.length-1;o>=0;o--)if(Zt(l[o])){if(o===0){Te(e,n[0]);continue}Te(l[o-1],n[o-1])}}function U(e){return Object.keys(e)}function tt(e,t=0){let n=null,i=[];return function(...l){return n&&clearTimeout(n),n=setTimeout(()=>{const o=e(...l);i.forEach(d=>d(o)),i=[]},t),new Promise(o=>i.push(o))}}function Xt(e,t){let n;return async function(...l){const o=e(...l);n=o;const d=await o;return o!==n||(n=void 0,t(d,l)),d}}function nt(e){return Array.isArray(e)?e:e?[e]:[]}function ue(e,t){const n={};for(const i in e)t.includes(i)||(n[i]=e[i]);return n}function Jt(e){let t=null,n=[];return function(...i){const l=X(()=>{if(t!==l)return;const o=e(...i);n.forEach(d=>d(o)),n=[],t=null});return t=l,new Promise(o=>n.push(o))}}const en=(e,t,n)=>t.slots.default?typeof e=="string"||!e?t.slots.default(n()):{default:()=>{var i,l;return(l=(i=t.slots).default)===null||l===void 0?void 0:l.call(i,n())}}:t.slots.default;function Fe(e){if(ft(e))return e._value}function ft(e){return"_value"in e}function tn(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function rt(e){if(!Me(e))return e;const t=e.target;if(Yt(t.type)&&ft(t))return Fe(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(Qt(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(Fe);if(ct(t)){const n=Array.from(t.options).find(i=>i.selected);return n?Fe(n):t.value}return tn(t)}function nn(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ee(e)&&e._$$isNormalized?e:ee(e)?Object.keys(e).reduce((n,i)=>{const l=rn(e[i]);return e[i]!==!1&&(n[i]=at(l)),n},t):typeof e!="string"?t:e.split("|").reduce((n,i)=>{const l=an(i);return l.name&&(n[l.name]=at(l.params)),n},t):t}function rn(e){return e===!0?[]:Array.isArray(e)||ee(e)?e:[e]}function at(e){const t=n=>typeof n=="string"&&n[0]==="@"?ln(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,i)=>(n[i]=t(e[i]),n),{})}const an=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function ln(e){const t=n=>M(n,e)||n[e];return t.__locatorRef=e,t}const on={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let un=Object.assign({},on);const J=()=>un;async function sn(e,t,n={}){const i=n==null?void 0:n.bails,l={name:(n==null?void 0:n.name)||"{field}",rules:t,label:n==null?void 0:n.label,bails:i??!0,formData:(n==null?void 0:n.values)||{}},d=(await cn(l,e)).errors;return{errors:d,valid:!d.length}}async function cn(e,t){if(te(e.rules)||st(e.rules))return fn(t,e.rules);if(k(e.rules)||Array.isArray(e.rules)){const d={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},m=Array.isArray(e.rules)?e.rules:[e.rules],c=m.length,f=[];for(let p=0;p<c;p++){const _=m[p],S=await _(t,d);if(!(typeof S!="string"&&!Array.isArray(S)&&S)){if(Array.isArray(S))f.push(...S);else{const C=typeof S=="string"?S:mt(d);f.push(C)}if(e.bails)return{errors:f}}}return{errors:f}}const n=Object.assign(Object.assign({},e),{rules:nn(e.rules)}),i=[],l=Object.keys(n.rules),o=l.length;for(let d=0;d<o;d++){const m=l[d],c=await vn(n,t,{name:m,params:n.rules[m]});if(c.error&&(i.push(c.error),e.bails))return{errors:i}}return{errors:i}}function dn(e){return!!e&&e.name==="ValidationError"}function vt(e){return{__type:"VVTypedSchema",async parse(n){var i;try{return{output:await e.validate(n,{abortEarly:!1}),errors:[]}}catch(l){if(!dn(l))throw l;if(!(!((i=l.inner)===null||i===void 0)&&i.length)&&l.errors.length)return{errors:[{path:l.path,errors:l.errors}]};const o=l.inner.reduce((d,m)=>{const c=m.path||"";return d[c]||(d[c]={errors:[],path:c}),d[c].errors.push(...m.errors),d},{});return{errors:Object.values(o)}}}}}async function fn(e,t){const i=await(te(t)?t:vt(t)).parse(e),l=[];for(const o of i.errors)o.errors.length&&l.push(...o.errors);return{errors:l}}async function vn(e,t,n){const i=Ht(n.name);if(!i)throw new Error(`No such validator '${n.name}' exists.`);const l=mn(n.params,e.formData),o={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:l})},d=await i(t,l,o);return typeof d=="string"?{error:d}:{error:d?void 0:mt(o)}}function mt(e){const t=J().generateMessage;return t?t(e):"Field is invalid"}function mn(e,t){const n=i=>Wt(i)?i(t):i;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((i,l)=>(i[l]=n(e[l]),i),{})}async function hn(e,t){const i=await(te(e)?e:vt(e)).parse(t),l={},o={};for(const d of i.errors){const m=d.errors,c=(d.path||"").replace(/\["(\d+)"\]/g,(f,p)=>`[${p}]`);l[c]={valid:!m.length,errors:m},m.length&&(o[c]=m[0])}return{valid:!i.errors.length,results:l,errors:o,values:i.value}}async function pn(e,t,n){const l=U(e).map(async f=>{var p,_,S;const E=(p=n==null?void 0:n.names)===null||p===void 0?void 0:p[f],C=await sn(M(t,f),e[f],{name:(E==null?void 0:E.name)||f,label:E==null?void 0:E.label,values:t,bails:(S=(_=n==null?void 0:n.bailsMap)===null||_===void 0?void 0:_[f])!==null&&S!==void 0?S:!0});return Object.assign(Object.assign({},C),{path:f})});let o=!0;const d=await Promise.all(l),m={},c={};for(const f of d)m[f.path]={valid:f.valid,errors:f.errors},f.valid||(o=!1,c[f.path]=f.errors[0]);return{valid:o,results:m,errors:c}}let yn=0;const se=["bails","fieldsCount","id","multiple","type","validate"];function ht(e){const t=P(e==null?void 0:e.initialValues)||{},n=P(e==null?void 0:e.validationSchema);return n&&te(n)&&k(n.cast)?V(n.cast(t)||{}):V(t)}function gn(e){var t;const n=yn++;let i=0;const l=w(!1),o=w(!1),d=w(0),m=[],c=Ce(ht(e)),f=w([]),p=w({}),_=w({}),S=Jt(()=>{_.value=f.value.reduce((a,r)=>(a[ye(q(r.path))]=r,a),{})});function E(a,r){const u=A(a);if(!u){typeof a=="string"&&(p.value[ye(a)]=nt(r));return}if(typeof a=="string"){const s=ye(a);p.value[s]&&delete p.value[s]}u.errors=nt(r),u.valid=!u.errors.length}function C(a){U(a).forEach(r=>{E(r,a[r])})}e!=null&&e.initialErrors&&C(e.initialErrors);const K=F(()=>{const a=f.value.reduce((r,u)=>(u.errors.length&&(r[u.path]=u.errors),r),{});return Object.assign(Object.assign({},p.value),a)}),Z=F(()=>U(K.value).reduce((a,r)=>{const u=K.value[r];return u!=null&&u.length&&(a[r]=u[0]),a},{})),ne=F(()=>f.value.reduce((a,r)=>(a[r.path]={name:r.path||"",label:r.label||""},a),{})),de=F(()=>f.value.reduce((a,r)=>{var u;return a[r.path]=(u=r.bails)!==null&&u!==void 0?u:!0,a},{})),re=Object.assign({},(e==null?void 0:e.initialErrors)||{}),fe=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:z,originalInitialValues:Q,setInitialValues:ve}=_n(f,c,e),me=bn(f,c,Q,Z),ae=F(()=>f.value.reduce((a,r)=>{const u=M(c,r.path);return G(a,r.path,u),a},{})),B=e==null?void 0:e.validationSchema;function x(a,r){var u,s;const h=F(()=>M(z.value,q(a))),v=_.value[q(a)];if(v){((r==null?void 0:r.type)==="checkbox"||(r==null?void 0:r.type)==="radio")&&(v.multiple=!0);const T=i++;return Array.isArray(v.id)?v.id.push(T):v.id=[v.id,T],v.fieldsCount++,v.__flags.pendingUnmount[T]=!1,v}const y=F(()=>M(c,q(a))),O=q(a),g=i++,b=Ce({id:g,path:a,touched:!1,pending:!1,valid:!0,validated:!!(!((u=re[O])===null||u===void 0)&&u.length),initialValue:h,errors:Ct([]),bails:(s=r==null?void 0:r.bails)!==null&&s!==void 0?s:!1,label:r==null?void 0:r.label,type:(r==null?void 0:r.type)||"default",value:y,multiple:!1,__flags:{pendingUnmount:{[g]:!1}},fieldsCount:1,validate:r==null?void 0:r.validate,dirty:F(()=>!ce(P(y),P(h)))});return f.value.push(b),_.value[O]=b,S(),Z.value[O]&&!re[O]&&X(()=>{H(O,{mode:"silent"})}),Ne(a)&&Be(a,T=>{S();const oe=V(y.value);_.value[T]=b,X(()=>{G(c,T,oe)})}),b}const Oe=tt(He,5),he=tt(He,5),ie=Xt(async a=>await a==="silent"?Oe():he(),(a,[r])=>{const u=U(R.errorBag.value);return[...new Set([...U(a.results),...f.value.map(h=>h.path),...u])].sort().reduce((h,v)=>{const y=v,O=A(y)||I(y),g=(a.results[y]||{errors:[]}).errors,b={errors:g,valid:!g.length};return h.results[y]=b,b.valid||(h.errors[y]=b.errors[0]),O&&p.value[y]&&delete p.value[y],O?(O.valid=b.valid,r==="silent"||r==="validated-only"&&!O.validated||E(O,b.errors),h):(E(y,g),h)},{valid:a.valid,results:{},errors:{}})});function D(a){f.value.forEach(a)}function A(a){const r=typeof a=="string"?ye(a):a;return typeof r=="string"?_.value[r]:r}function I(a){return f.value.filter(u=>a.startsWith(u.path)).reduce((u,s)=>u?s.path.length>u.path.length?s:u:s,void 0)}let N=[],L;function Ve(a){return N.push(a),L||(L=X(()=>{[...N].sort().reverse().forEach(u=>{et(c,u)}),N=[],L=null})),L}function De(a){return function(u,s){return function(v){return v instanceof Event&&(v.preventDefault(),v.stopPropagation()),D(y=>y.touched=!0),l.value=!0,d.value++,le().then(y=>{const O=V(c);if(y.valid&&typeof u=="function"){const g=V(ae.value);let b=a?g:O;return y.values&&(b=y.values),u(b,{evt:v,controlledValues:g,setErrors:C,setFieldError:E,setTouched:Ae,setFieldTouched:pe,setValues:Ee,setFieldValue:$,resetForm:je,resetField:$e})}!y.valid&&typeof s=="function"&&s({values:O,evt:v,errors:y.errors,results:y.results})}).then(y=>(l.value=!1,y),y=>{throw l.value=!1,y})}}}const Se=De(!1);Se.withControlled=De(!0);function pt(a,r){const u=f.value.findIndex(h=>h.path===a),s=f.value[u];if(!(u===-1||!s)){if(X(()=>{H(a,{mode:"silent",warn:!1})}),s.multiple&&s.fieldsCount&&s.fieldsCount--,Array.isArray(s.id)){const h=s.id.indexOf(r);h>=0&&s.id.splice(h,1),delete s.__flags.pendingUnmount[r]}(!s.multiple||s.fieldsCount<=0)&&(f.value.splice(u,1),xe(a),S(),delete _.value[a])}}function yt(a){return D(r=>{r.path.startsWith(a)&&U(r.__flags.pendingUnmount).forEach(u=>{r.__flags.pendingUnmount[u]=!0})})}const R={formId:n,values:c,controlledValues:ae,errorBag:K,errors:Z,schema:B,submitCount:d,meta:me,isSubmitting:l,isValidating:o,fieldArrays:m,keepValuesOnUnmount:fe,validateSchema:P(B)?ie:void 0,validate:le,setFieldError:E,validateField:H,setFieldValue:$,setValues:Ee,setErrors:C,setFieldTouched:pe,setTouched:Ae,resetForm:je,resetField:$e,handleSubmit:Se,stageInitialValue:Vt,unsetInitialValue:xe,setFieldInitialValue:we,useFieldModel:gt,createPathState:x,getPathState:A,unsetPathValue:Ve,removePathState:pt,initialValues:z,getAllPathStates:()=>f.value,markForUnmount:yt,isFieldTouched:bt,isFieldDirty:_t,isFieldValid:Ot};function $(a,r,u=!0){const s=V(r),h=typeof a=="string"?a:a.path;A(h)||x(h),G(c,h,s),u&&H(h)}function Ee(a,r=!0){be(c,a),m.forEach(u=>u&&u.reset()),r&&le()}function Le(a){const r=A(P(a))||x(a);return F({get(){return r.value},set(u){const s=P(a);$(s,u,!1),r.validated=!0,r.pending=!0,H(s).then(()=>{r.pending=!1})}})}function gt(a){return Array.isArray(a)?a.map(Le):Le(a)}function pe(a,r){const u=A(a);u&&(u.touched=r)}function bt(a){var r;return!!(!((r=A(a))===null||r===void 0)&&r.touched)}function _t(a){var r;return!!(!((r=A(a))===null||r===void 0)&&r.dirty)}function Ot(a){var r;return!!(!((r=A(a))===null||r===void 0)&&r.valid)}function Ae(a){if(typeof a=="boolean"){D(r=>{r.touched=a});return}U(a).forEach(r=>{pe(r,!!a[r])})}function $e(a,r){var u;const s=r&&"value"in r?r.value:M(z.value,a);we(a,V(s)),$(a,s,!1),pe(a,(u=r==null?void 0:r.touched)!==null&&u!==void 0?u:!1),E(a,(r==null?void 0:r.errors)||[])}function je(a){let r=a!=null&&a.values?a.values:Q.value;r=te(B)&&k(B.cast)?B.cast(r):r,ve(r),D(u=>{var s;u.validated=!1,u.touched=((s=a==null?void 0:a.touched)===null||s===void 0?void 0:s[u.path])||!1,$(u.path,M(r,u.path),!1),E(u.path,void 0)}),Ee(r,!1),C((a==null?void 0:a.errors)||{}),d.value=(a==null?void 0:a.submitCount)||0,X(()=>{le({mode:"silent"})})}async function le(a){const r=(a==null?void 0:a.mode)||"force";if(r==="force"&&D(v=>v.validated=!0),R.validateSchema)return R.validateSchema(r);o.value=!0;const u=await Promise.all(f.value.map(v=>v.validate?v.validate(a).then(y=>({key:v.path,valid:y.valid,errors:y.errors})):Promise.resolve({key:v.path,valid:!0,errors:[]})));o.value=!1;const s={},h={};for(const v of u)s[v.key]={valid:v.valid,errors:v.errors},v.errors.length&&(h[v.key]=v.errors[0]);return{valid:u.every(v=>v.valid),results:s,errors:h}}async function H(a,r){var u;const s=A(a);if(s&&(s.validated=!0),B){const{results:h}=await ie((r==null?void 0:r.mode)||"validated-only");return h[a]||{errors:[],valid:!0}}return s!=null&&s.validate?s.validate(r):(!s&&(u=r==null?void 0:r.warn),Promise.resolve({errors:[],valid:!0}))}function xe(a){et(z.value,a)}function Vt(a,r,u=!1){we(a,r),G(c,a,r),u&&!(e!=null&&e.initialValues)&&G(Q.value,a,V(r))}function we(a,r){G(z.value,a,V(r))}async function He(){const a=P(B);if(!a)return{valid:!0,results:{},errors:{}};o.value=!0;const r=st(a)||te(a)?await hn(a,c):await pn(a,c,{names:ne.value,bailsMap:de.value});return o.value=!1,r}const St=Se((a,{evt:r})=>{dt(r)&&r.target.submit()});lt(()=>{if(e!=null&&e.initialErrors&&C(e.initialErrors),e!=null&&e.initialTouched&&Ae(e.initialTouched),e!=null&&e.validateOnMount){le();return}R.validateSchema&&R.validateSchema("silent")}),Ne(B)&&Be(B,()=>{var a;(a=R.validateSchema)===null||a===void 0||a.call(R,"validated-only")}),Pt(qt,R);function Et(a,r){const u=A(q(a))||x(a),s=()=>k(r)?r(ue(u,se)):r||{};function h(){var O;u.touched=!0,((O=s().validateOnBlur)!==null&&O!==void 0?O:J().validateOnBlur)&&H(u.path)}function v(O){var g;const b=(g=s().validateOnModelUpdate)!==null&&g!==void 0?g:J().validateOnModelUpdate;$(u.path,O,b)}return F(()=>{if(k(r)){const b=r(u),T=b.model||"modelValue";return Object.assign({onBlur:h,[T]:u.value,[`onUpdate:${T}`]:v},b.props||{})}const O=(r==null?void 0:r.model)||"modelValue",g={onBlur:h,[O]:u.value,[`onUpdate:${O}`]:v};return r!=null&&r.mapProps?Object.assign(Object.assign({},g),r.mapProps(ue(u,se))):g})}function At(a,r){const u=A(q(a))||x(a),s=()=>k(r)?r(ue(u,se)):r||{};function h(){var g;u.touched=!0,((g=s().validateOnBlur)!==null&&g!==void 0?g:J().validateOnBlur)&&H(u.path)}function v(g){var b;const T=rt(g),oe=(b=s().validateOnInput)!==null&&b!==void 0?b:J().validateOnInput;$(u.path,T,oe)}function y(g){var b;const T=rt(g),oe=(b=s().validateOnChange)!==null&&b!==void 0?b:J().validateOnChange;$(u.path,T,oe)}return F(()=>{const g={value:u.value,onChange:y,onInput:v,onBlur:h};return k(r)?Object.assign(Object.assign({},g),r(ue(u,se)).attrs||{}):r!=null&&r.mapAttrs?Object.assign(Object.assign({},g),r.mapAttrs(ue(u,se))):g})}return Object.assign(Object.assign({},R),{values:Tt(c),handleReset:()=>je(),submitForm:St,defineComponentBinds:Et,defineInputBinds:At})}function bn(e,t,n,i){const l={touched:"some",pending:"some",valid:"every"},o=F(()=>!ce(t,P(n)));function d(){const c=e.value;return U(l).reduce((f,p)=>{const _=l[p];return f[p]=c[_](S=>S[p]),f},{})}const m=Ce(d());return Ft(()=>{const c=d();m.touched=c.touched,m.valid=c.valid,m.pending=c.pending}),F(()=>Object.assign(Object.assign({initialValues:P(n)},m),{valid:m.valid&&!U(i.value).length,dirty:o.value}))}function _n(e,t,n){const i=ht(n),l=n==null?void 0:n.initialValues,o=w(i),d=w(V(i));function m(c,f=!1){o.value=be(V(o.value)||{},V(c)),d.value=be(V(d.value)||{},V(c)),f&&e.value.forEach(p=>{if(p.touched)return;const S=M(o.value,p.path);G(t,p.path,V(S))})}return Ne(l)&&Be(l,c=>{c&&m(c,!0)},{deep:!0}),{initialValues:o,originalInitialValues:d,setInitialValues:m}}const On=Re({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,t){const n=Pe(e,"initialValues"),i=Pe(e,"validationSchema"),l=Pe(e,"keepValues"),{errors:o,errorBag:d,values:m,meta:c,isSubmitting:f,isValidating:p,submitCount:_,controlledValues:S,validate:E,validateField:C,handleReset:K,resetForm:Z,handleSubmit:ne,setErrors:de,setFieldError:re,setFieldValue:fe,setValues:z,setFieldTouched:Q,setTouched:ve,resetField:me}=gn({validationSchema:i.value?i:void 0,initialValues:n,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:l}),ae=ne((I,{evt:N})=>{dt(N)&&N.target.submit()},e.onInvalidSubmit),B=e.onSubmit?ne(e.onSubmit,e.onInvalidSubmit):ae;function x(I){Me(I)&&I.preventDefault(),K(),typeof t.attrs.onReset=="function"&&t.attrs.onReset()}function Oe(I,N){return ne(typeof I=="function"&&!N?I:N,e.onInvalidSubmit)(I)}function he(){return V(m)}function ie(){return V(c.value)}function D(){return V(o.value)}function A(){return{meta:c.value,errors:o.value,errorBag:d.value,values:m,isSubmitting:f.value,isValidating:p.value,submitCount:_.value,controlledValues:S.value,validate:E,validateField:C,handleSubmit:Oe,handleReset:K,submitForm:ae,setErrors:de,setFieldError:re,setFieldValue:fe,setValues:z,setFieldTouched:Q,setTouched:ve,resetForm:Z,resetField:me,getValues:he,getMeta:ie,getErrors:D}}return t.expose({setFieldError:re,setErrors:de,setFieldValue:fe,setValues:z,setFieldTouched:Q,setTouched:ve,resetForm:Z,validate:E,validateField:C,resetField:me,getValues:he,getMeta:ie,getErrors:D}),function(){const N=e.as==="form"?e.as:jt(e.as),L=en(N,t,A);if(!e.as)return L;const Ve=e.as==="form"?{novalidate:!0}:{};return wt(N,Object.assign(Object.assign(Object.assign({},Ve),t.attrs),{onSubmit:B,onReset:x}),L)}}}),Vn=On,Sn=Y("span",{class:"login-btn-text"},"登录",-1),En={key:0,class:"mt-4 error-container"},it=Re({__name:"AuthLogin",setup(e){const t=w(!1),n=w(!1),i=w(""),l=w(""),o=w(!1);async function d(m,{setErrors:c}){o.value=!0;let f=i.value;i.value!=""&&(f=zt(i.value));const p=ot();return p.returnUrl=new URLSearchParams(window.location.search).get("redirect"),p.login(l.value,f).then(_=>{console.log(_),o.value=!1}).catch(_=>{c({apiError:_}),o.value=!1})}return(m,c)=>(ge(),Nt(P(Vn),{onSubmit:d,class:"mt-4 login-form"},{default:W(({errors:f,isSubmitting:p})=>[j(Ge,{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=_=>l.value=_),label:"用户名",class:"mb-6 input-field",required:"",density:"comfortable","hide-details":"auto",variant:"outlined",style:qe({color:P(Ie)().uiTheme==="PurpleTheme"?"#000000dd":"#ffffff"}),"prepend-inner-icon":"mdi-account",disabled:o.value},null,8,["modelValue","style","disabled"]),j(Ge,{modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=_=>i.value=_),label:"密码",required:"",density:"comfortable",variant:"outlined",style:qe({color:P(Ie)().uiTheme==="PurpleTheme"?"#000000dd":"#ffffff"}),"hide-details":"auto","append-icon":n.value?"mdi-eye":"mdi-eye-off",type:n.value?"text":"password","onClick:append":c[2]||(c[2]=_=>n.value=!n.value),class:"pwd-input","prepend-inner-icon":"mdi-lock",disabled:o.value},null,8,["modelValue","style","append-icon","type","disabled"]),j(Bt,{color:"secondary",loading:p||o.value,block:"",class:"login-btn mt-8",variant:"flat",size:"large",disabled:t.value,type:"submit",elevation:"2"},{default:W(()=>[Sn]),_:2},1032,["loading","disabled"]),f.apiError?(ge(),ke("div",En,[j(Rt,{color:"error",variant:"tonal",density:"comfortable",icon:"mdi-alert-circle",border:"start"},{default:W(()=>[kt(It(f.apiError),1)]),_:2},1024)])):Ut("",!0)]),_:1}))}});const An={key:0,class:"login-page-container"},jn=Y("div",{class:"login-background"},null,-1),wn={class:"logo-wrapper"},Pn={class:"divider-container"},Tn={key:1,class:"login-page-container-dark"},Fn=Y("div",{class:"login-background-dark"},null,-1),Cn={class:"logo-wrapper"},Nn={class:"divider-container"},Dn=Re({__name:"LoginPage",setup(e){const t=w(!1),n=Mt(),i=ot();return lt(()=>{if(i.has_token()){n.push(i.returnUrl||"/");return}setTimeout(()=>{t.value=!0},100)}),(l,o)=>P(Ie)().uiTheme==="PurpleTheme"?(ge(),ke("div",An,[jn,j(Ze,{variant:"outlined",class:Ke(["login-card",{"card-visible":t.value}])},{default:W(()=>[j(We,{class:"pa-10"},{default:W(()=>[Y("div",wn,[j(Qe)]),Y("div",Pn,[j(Ye,{class:"custom-divider"})]),j(it)]),_:1})]),_:1},8,["class"])])):(ge(),ke("div",Tn,[Fn,j(Ze,{variant:"outlined",class:Ke(["login-card",{"card-visible":t.value}])},{default:W(()=>[j(We,{class:"pa-10"},{default:W(()=>[Y("div",Cn,[j(Qe)]),Y("div",Nn,[j(Ye,{class:"custom-divider"})]),j(it)]),_:1})]),_:1},8,["class"])]))}});export{Dn as default};
