import{V as oe}from"./index-34d28bc5.js";import{a4 as ge,o as i,j as n,b as a,w as l,F as M,l as Ve,c as m,i as Z,g as Q,V as $,d as s,t as f,Q as w,aH as X,n as x,e as U,k as Ie,m as F,r as H,f as g,h as Y,av as xe,a9 as j,a5 as ye,u as J,aI as fe,as as ve,a8 as be,R as Ke,E as re,B as Ce,ak as we,al as Ue,z as Ee,aJ as je,T as Te}from"./index-f4130869.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";const Be={name:"ListConfigItem",props:{value:{type:Array,default:()=>[]},label:{type:String,default:""}},data(){return{newItem:"",items:this.value,editIndex:-1,editItem:""}},watch:{items(e){this.$emit("input",e)}},methods:{addItem(){this.newItem.trim()!==""&&(this.items.push(this.newItem.trim()),this.newItem="")},removeItem(e){this.items.splice(e,1)},startEdit(e,b){this.editIndex=e,this.editItem=b},saveEdit(){this.editItem.trim()!==""&&(this.items[this.editIndex]=this.editItem.trim(),this.cancelEdit())},cancelEdit(){this.editIndex=-1,this.editItem=""}}},ze={class:"list-config-item"},Le={key:2},ke={key:3},Ae={style:{display:"flex","align-items":"center"}};function Se(e,b,T,G,V,K){const P=ge("v-list-item-content");return i(),n("div",ze,[a(Ie,{dense:"",style:{"background-color":"transparent","max-height":"300px","overflow-y":"auto"}},{default:l(()=>[(i(!0),n(M,null,Ve(V.items,(E,h)=>(i(),m(Z,{key:h},{default:l(()=>[a(P,{style:{display:"flex","justify-content":"space-between"}},{default:l(()=>[V.editIndex!==h?(i(),m(Q,{key:0},{default:l(()=>[a($,{size:"small",label:"",color:"primary"},{default:l(()=>[s(f(E),1)]),_:2},1024)]),_:2},1024)):(i(),m(w,{key:1,modelValue:V.editItem,"onUpdate:modelValue":b[0]||(b[0]=d=>V.editItem=d),dense:"","hide-details":"",variant:"outlined",density:"compact",onKeyup:[X(K.saveEdit,["enter"]),X(K.cancelEdit,["esc"])],autofocus:""},null,8,["modelValue","onKeyup"])),V.editIndex!==h?(i(),n("div",Le,[a(x,{onClick:d=>K.startEdit(h,E),variant:"plain",class:"edit-btn",icon:"",size:"small"},{default:l(()=>[a(U,null,{default:l(()=>[s("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),a(x,{onClick:d=>K.removeItem(h),variant:"plain",icon:"",size:"small"},{default:l(()=>[a(U,null,{default:l(()=>[s("mdi-close")]),_:1})]),_:2},1032,["onClick"])])):(i(),n("div",ke,[a(x,{onClick:K.saveEdit,variant:"plain",color:"success",icon:"",size:"small"},{default:l(()=>[a(U,null,{default:l(()=>[s("mdi-check")]),_:1})]),_:1},8,["onClick"]),a(x,{onClick:K.cancelEdit,variant:"plain",color:"error",icon:"",size:"small"},{default:l(()=>[a(U,null,{default:l(()=>[s("mdi-close")]),_:1})]),_:1},8,["onClick"])]))]),_:2},1024)]),_:2},1024))),128))]),_:1}),F("div",Ae,[a(w,{modelValue:V.newItem,"onUpdate:modelValue":b[1]||(b[1]=E=>V.newItem=E),label:"添加新项，按回车确认添加",onKeyup:X(K.addItem,["enter"]),clearable:"",dense:"","hide-details":"",variant:"outlined",density:"compact"},null,8,["modelValue","onKeyup"]),a(x,{onClick:K.addItem,text:"",variant:"tonal"},{default:l(()=>[a(U,null,{default:l(()=>[s("mdi-plus")]),_:1}),s(" 添加 ")]),_:1},8,["onClick"])])])}const p=he(Be,[["render",Se],["__scopeId","data-v-104117d5"]]);const De={key:0,class:"config-section"},Ne={class:"metadata-key"},Oe={key:0,class:"important-hint"},qe={key:0,class:"object-config"},Fe={key:0,class:"nested-object"},Re={key:0,class:"nested-container"},He={key:0},Je={class:"property-key"},Me={key:1},Qe={key:0,class:"important-hint"},Ge={key:0,class:"w-100"},Pe={key:1,class:"editor-container"},We={key:1,class:"w-100"},Xe={key:1,class:"simple-config"},Ye={class:"property-key"},Ze={key:0,class:"important-hint"},$e={class:"w-100"},pe={name:"AstrBotConfig",components:{ListConfigItem:p},props:{metadata:{type:Object,required:!0},iterable:{type:Object,required:!0},metadataKey:{type:String,required:!0}}},_e=Object.assign(pe,{setup(e){const b=H(!1),T=H(""),G=H("json"),V=H("vs-light");let K=null;function P(h,d,W,R){T.value=h,G.value=R||"json",V.value=W||"vs-light",K=d,b.value=!0}function E(){b.value=!1}return(h,d)=>{var R;const W=ge("AstrBotConfig",!0);return i(),n(M,null,[e.iterable&&((R=e.metadata[e.metadataKey])==null?void 0:R.type)==="object"?(i(),n("div",De,[a(Q,{class:"config-title"},{default:l(()=>{var v;return[s(f((v=e.metadata[e.metadataKey])==null?void 0:v.description)+" ",1),F("span",Ne,"("+f(e.metadataKey)+")",1)]}),_:1}),a(Y,{class:"config-hint"},{default:l(()=>{var v,B,u;return[(v=e.metadata[e.metadataKey])!=null&&v.obvious_hint&&((B=e.metadata[e.metadataKey])!=null&&B.hint)?(i(),n("span",Oe,"‼️")):g("",!0),s(" "+f((u=e.metadata[e.metadataKey])==null?void 0:u.hint),1)]}),_:1})])):g("",!0),a(re,{class:"px-0 py-1"},{default:l(()=>{var v,B;return[((v=e.metadata[e.metadataKey])==null?void 0:v.type)==="object"||(B=e.metadata[e.metadataKey])!=null&&B.config_template?(i(),n("div",qe,[(i(!0),n(M,null,Ve(e.iterable,(u,t,C)=>{var z,L,k,A;return i(),n("div",{key:t,class:"config-item"},[((z=e.metadata[e.metadataKey].items[t])==null?void 0:z.type)==="object"?(i(),n("div",Fe,[e.metadata[e.metadataKey].items[t]&&!((L=e.metadata[e.metadataKey].items[t])!=null&&L.invisible)?(i(),n("div",Re,[a(xe,null,{default:l(()=>[a(W,{metadata:e.metadata[e.metadataKey].items,iterable:e.iterable[t],metadataKey:t},null,8,["metadata","iterable","metadataKey"])]),_:2},1024)])):g("",!0)])):(i(),n(M,{key:1},[(k=e.metadata[e.metadataKey].items[t])!=null&&k.invisible?g("",!0):(i(),m(be,{key:0,class:"config-row"},{default:l(()=>[a(j,{cols:"12",sm:"6",class:"property-info"},{default:l(()=>[a(Z,{density:"compact"},{default:l(()=>[a(Q,{class:"property-name"},{default:l(()=>{var c,o;return[(c=e.metadata[e.metadataKey].items[t])!=null&&c.description?(i(),n("span",He,[s(f((o=e.metadata[e.metadataKey].items[t])==null?void 0:o.description)+" ",1),F("span",Je,"("+f(t)+")",1)])):(i(),n("span",Me,f(t),1))]}),_:2},1024),a(Y,{class:"property-hint"},{default:l(()=>{var c,o,I;return[(c=e.metadata[e.metadataKey].items[t])!=null&&c.obvious_hint&&((o=e.metadata[e.metadataKey].items[t])!=null&&o.hint)?(i(),n("span",Qe,"‼️")):g("",!0),s(" "+f((I=e.metadata[e.metadataKey].items[t])==null?void 0:I.hint),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),a(j,{cols:"12",sm:"1",class:"d-flex align-center type-indicator"},{default:l(()=>{var c;return[(c=e.metadata[e.metadataKey].items[t])!=null&&c.invisible?g("",!0):(i(),m($,{key:0,color:"primary",label:"",size:"x-small",variant:"flat"},{default:l(()=>{var o;return[s(f(((o=e.metadata[e.metadataKey].items[t])==null?void 0:o.type)||"string"),1)]}),_:2},1024))]}),_:2},1024),a(j,{cols:"12",sm:"5",class:"config-input"},{default:l(()=>{var c,o,I,S,D,N,O,q,r,_,ee,te,ae,le,ie,de,ne,me,se;return[e.metadata[e.metadataKey].items[t]?(i(),n("div",Ge,[(c=e.metadata[e.metadataKey].items[t])!=null&&c.options&&!((o=e.metadata[e.metadataKey].items[t])!=null&&o.invisible)?(i(),m(ye,{key:0,modelValue:e.iterable[t],"onUpdate:modelValue":y=>e.iterable[t]=y,items:(I=e.metadata[e.metadataKey].items[t])==null?void 0:I.options,disabled:(S=e.metadata[e.metadataKey].items[t])==null?void 0:S.readonly,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","disabled"])):(D=e.metadata[e.metadataKey].items[t])!=null&&D.editor_mode&&!((N=e.metadata[e.metadataKey].items[t])!=null&&N.invisible)?(i(),n("div",Pe,[a(J(oe),{theme:((O=e.metadata[e.metadataKey].items[t])==null?void 0:O.editor_theme)||"vs-light",language:((q=e.metadata[e.metadataKey].items[t])==null?void 0:q.editor_language)||"json",style:{"min-height":"100px","flex-grow":"1",border:"1px solid rgba(0, 0, 0, 0.1)"},value:e.iterable[t],"onUpdate:value":y=>e.iterable[t]=y},null,8,["theme","language","value","onUpdate:value"]),a(x,{icon:"",size:"small",variant:"text",color:"primary",class:"editor-fullscreen-btn",onClick:y=>{var ue,ce;return P(t,e.iterable,(ue=e.metadata[e.metadataKey].items[t])==null?void 0:ue.editor_theme,(ce=e.metadata[e.metadataKey].items[t])==null?void 0:ce.editor_language)},title:"全屏编辑"},{default:l(()=>[a(U,null,{default:l(()=>[s("mdi-fullscreen")]),_:1})]),_:2},1032,["onClick"])])):((r=e.metadata[e.metadataKey].items[t])==null?void 0:r.type)==="string"&&!((_=e.metadata[e.metadataKey].items[t])!=null&&_.invisible)?(i(),m(w,{key:2,modelValue:e.iterable[t],"onUpdate:modelValue":y=>e.iterable[t]=y,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):(((ee=e.metadata[e.metadataKey].items[t])==null?void 0:ee.type)==="int"||((te=e.metadata[e.metadataKey].items[t])==null?void 0:te.type)==="float")&&!((ae=e.metadata[e.metadataKey])!=null&&ae.invisible)?(i(),m(w,{key:3,modelValue:e.iterable[t],"onUpdate:modelValue":y=>e.iterable[t]=y,density:"compact",variant:"outlined",class:"config-field",type:"number","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((le=e.metadata[e.metadataKey].items[t])==null?void 0:le.type)==="text"&&!((ie=e.metadata[e.metadataKey].items[t])!=null&&ie.invisible)?(i(),m(fe,{key:4,modelValue:e.iterable[t],"onUpdate:modelValue":y=>e.iterable[t]=y,variant:"outlined",rows:"3",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((de=e.metadata[e.metadataKey].items[t])==null?void 0:de.type)==="bool"&&!((ne=e.metadata[e.metadataKey].items[t])!=null&&ne.invisible)?(i(),m(ve,{key:5,modelValue:e.iterable[t],"onUpdate:modelValue":y=>e.iterable[t]=y,color:"primary",inset:"",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((me=e.metadata[e.metadataKey].items[t])==null?void 0:me.type)==="list"&&!((se=e.metadata[e.metadataKey].items[t])!=null&&se.invisible)?(i(),m(p,{key:6,value:e.iterable[t],class:"config-field"},null,8,["value"])):g("",!0)])):(i(),n("div",We,[a(w,{modelValue:e.iterable[t],"onUpdate:modelValue":y=>e.iterable[t]=y,label:t,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]))]}),_:2},1024)]),_:2},1024)),C!==Object.keys(e.iterable).length-1&&!((A=e.metadata[e.metadataKey].items[t])!=null&&A.invisible)?(i(),m(Ke,{key:1,class:"config-divider"})):g("",!0)],64))])}),128))])):(i(),n("div",Xe,[a(be,{class:"config-row"},{default:l(()=>[a(j,{cols:"12",sm:"6",class:"property-info"},{default:l(()=>[a(Z,{density:"compact"},{default:l(()=>[a(Q,{class:"property-name"},{default:l(()=>{var u;return[s(f((u=e.metadata[e.metadataKey])==null?void 0:u.description)+" ",1),F("span",Ye,"("+f(e.metadataKey)+")",1)]}),_:1}),a(Y,{class:"property-hint"},{default:l(()=>{var u,t,C;return[(u=e.metadata[e.metadataKey])!=null&&u.obvious_hint&&((t=e.metadata[e.metadataKey])!=null&&t.hint)?(i(),n("span",Ze,"‼️")):g("",!0),s(" "+f((C=e.metadata[e.metadataKey])==null?void 0:C.hint),1)]}),_:1})]),_:1})]),_:1}),a(j,{cols:"12",sm:"1",class:"d-flex align-center type-indicator"},{default:l(()=>{var u;return[(u=e.metadata[e.metadataKey])!=null&&u.invisible?g("",!0):(i(),m($,{key:0,color:"primary",label:"",size:"x-small",variant:"flat"},{default:l(()=>{var t;return[s(f((t=e.metadata[e.metadataKey])==null?void 0:t.type),1)]}),_:1}))]}),_:1}),a(j,{cols:"12",sm:"5",class:"config-input"},{default:l(()=>{var u,t,C,z,L,k,A,c,o,I,S,D,N,O,q;return[F("div",$e,[(u=e.metadata[e.metadataKey])!=null&&u.options&&!((t=e.metadata[e.metadataKey])!=null&&t.invisible)?(i(),m(ye,{key:0,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":d[0]||(d[0]=r=>e.iterable[e.metadataKey]=r),items:(C=e.metadata[e.metadataKey])==null?void 0:C.options,disabled:(z=e.metadata[e.metadataKey])==null?void 0:z.readonly,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","items","disabled"])):((L=e.metadata[e.metadataKey])==null?void 0:L.type)==="string"&&!((k=e.metadata[e.metadataKey])!=null&&k.invisible)?(i(),m(w,{key:1,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":d[1]||(d[1]=r=>e.iterable[e.metadataKey]=r),density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue"])):(((A=e.metadata[e.metadataKey])==null?void 0:A.type)==="int"||((c=e.metadata[e.metadataKey])==null?void 0:c.type)==="float")&&!((o=e.metadata[e.metadataKey])!=null&&o.invisible)?(i(),m(w,{key:2,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":d[2]||(d[2]=r=>e.iterable[e.metadataKey]=r),density:"compact",variant:"outlined",class:"config-field",type:"number","hide-details":""},null,8,["modelValue"])):((I=e.metadata[e.metadataKey])==null?void 0:I.type)==="text"&&!((S=e.metadata[e.metadataKey])!=null&&S.invisible)?(i(),m(fe,{key:3,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":d[3]||(d[3]=r=>e.iterable[e.metadataKey]=r),variant:"outlined","auto-grow":"",rows:"3",class:"config-field","hide-details":""},null,8,["modelValue"])):((D=e.metadata[e.metadataKey])==null?void 0:D.type)==="bool"&&!((N=e.metadata[e.metadataKey])!=null&&N.invisible)?(i(),m(ve,{key:4,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":d[4]||(d[4]=r=>e.iterable[e.metadataKey]=r),color:"primary",inset:"",density:"compact","hide-details":""},null,8,["modelValue"])):((O=e.metadata[e.metadataKey])==null?void 0:O.type)==="list"&&!((q=e.metadata[e.metadataKey])!=null&&q.invisible)?(i(),m(p,{key:5,value:e.iterable[e.metadataKey],class:"config-field"},null,8,["value"])):g("",!0)])]}),_:1})]),_:1}),a(Ke,{class:"my-2 config-divider"})]))]}),_:1}),a(Te,{modelValue:b.value,"onUpdate:modelValue":d[7]||(d[7]=v=>b.value=v),fullscreen:"",transition:"dialog-bottom-transition",scrollable:""},{default:l(()=>[a(Ce,null,{default:l(()=>[a(we,{color:"primary",dark:""},{default:l(()=>[a(x,{icon:"",onClick:d[5]||(d[5]=v=>b.value=!1)},{default:l(()=>[a(U,null,{default:l(()=>[s("mdi-close")]),_:1})]),_:1}),a(Ue,null,{default:l(()=>[s("编辑内容 - "+f(T.value),1)]),_:1}),a(Ee),a(je,null,{default:l(()=>[a(x,{variant:"text",onClick:E},{default:l(()=>[s("保存")]),_:1})]),_:1})]),_:1}),a(re,{class:"pa-0"},{default:l(()=>[a(J(oe),{theme:V.value,language:G.value,style:{height:"calc(100vh - 64px)"},value:J(K)[T.value],"onUpdate:value":d[6]||(d[6]=v=>J(K)[T.value]=v)},null,8,["theme","language","value"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),lt=he(_e,[["__scopeId","data-v-114ced2f"]]);export{lt as A};
