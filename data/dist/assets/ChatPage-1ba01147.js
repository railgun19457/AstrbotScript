import{j as c,b as r,w as n,B as I,T as z,F as T,Y as v,r as B,b1 as k,o as l,E as L,m as i,y as D,f as h,n as g,e as f,d as m,t as M,c as b,k as O,l as U,i as j,a as P,v as W,g as J,aj as G,V,u as A,az as H,Q as $,J as Q,P as K,A as F,C as Y,aH as q,S as X,z as Z,R as x}from"./index-f4130869.js";import{_ as ee}from"./astrbot_logo_mini-3d1805c3.js";import{m as N}from"./marked.esm-01fb2abe.js";const te={class:"chat-layout"},se={key:0,style:{display:"flex","align-items":"center","justify-content":"center",padding:"16px","padding-bottom":"0px"}},ae=i("img",{width:"50",src:ee,alt:"AstrBot Logo"},null,-1),ie={key:0,style:{"font-weight":"1000","font-size":"26px","margin-left":"8px"},class:"text-secondary"},oe={class:"sidebar-collapse-btn-container"},re={style:{padding:"16px","padding-top":"8px"}},ne={key:0,class:"no-conversations"},le={key:0,class:"no-conversations-text"},de=i("div",{class:"sidebar-section-title"}," ç³»ç»ŸçŠ¶æ€ ",-1),ce={class:"status-chips"},he=i("span",null,"LLM æœåŠ¡",-1),ue=i("span",null,"è¯­éŸ³è½¬æ–‡æœ¬",-1),pe={class:"chat-content-panel"},ge={class:"conversation-header fade-in"},me={key:0,class:"conversation-header-content"},ve={class:"conversation-header-title"},fe={class:"conversation-header-time"},be={class:"conversation-header-actions"},Ce={class:"messages-container",ref:"messageContainer"},ye={key:0,class:"welcome-container fade-in"},ke=i("div",{class:"welcome-title"},[i("span",null,"Hello, I'm"),i("span",{class:"bot-name"},"AstrBot â­")],-1),_e=i("div",{class:"welcome-hint"},[i("span",null,"è¾“å…¥"),i("code",null,"help"),i("span",null,"è·å–å¸®åŠ© ğŸ˜Š")],-1),we=i("div",{class:"welcome-hint"},[i("span",null,"é•¿æŒ‰"),i("code",null,"Ctrl"),i("span",null,"å½•åˆ¶è¯­éŸ³ ğŸ¤")],-1),Te=i("div",{class:"welcome-hint"},[i("span",null,"æŒ‰"),i("code",null,"Ctrl + V"),i("span",null,"ç²˜è´´å›¾ç‰‡ ğŸï¸")],-1),Me=[ke,_e,we,Te],Ue={key:1,class:"message-list"},Ee={key:0,class:"user-message"},Se={class:"message-bubble user-bubble"},Re={key:0,class:"image-attachments"},Ie=["src"],De={key:1,class:"audio-attachment"},Ve={controls:"",class:"audio-player"},Le=["src"],Ae={key:1,class:"bot-message"},He=i("span",{class:"text-h6"},"âœ¨",-1),$e={class:"message-bubble bot-bubble"},Ke=["innerHTML"],Fe={class:"input-area fade-in"},Ne={key:0,class:"attachments-preview"},ze=["src"],Be={key:0,class:"audio-preview"},Oe={name:"ChatPage",components:{},data(){return{prompt:"",messages:[],conversations:[],currCid:"",stagedImagesName:[],stagedImagesUrl:[],loadingChat:!1,inputFieldLabel:"èŠå¤©å§!",isRecording:!1,audioChunks:[],stagedAudioUrl:"",mediaRecorder:null,status:{},statusText:"",eventSource:null,ctrlKeyDown:!1,ctrlKeyTimer:null,ctrlKeyLongPressThreshold:300,mediaCache:{},editTitleDialog:!1,editingTitle:"",editingCid:"",sidebarCollapsed:!1,sidebarHovered:!1,sidebarHoverTimer:null,sidebarHoverExpanded:!1,sidebarHoverDelay:100,pendingCid:null}},computed:{getCurrentConversation(){return this.currCid?this.conversations.find(t=>t.cid===this.currCid):null}},watch:{$route:{immediate:!0,handler(t){if(console.log("Route changed:",t.path),t.path.startsWith("/chat/")||t.path.startsWith("/chatbox/")){const s=t.path.split("/")[2];console.log("Path CID:",s),s&&s!==this.currCid&&(this.conversations.length>0?this.conversations.find(a=>a.cid===s)&&this.getConversationMessages([s]):this.pendingCid=s)}}},conversations:{handler(t){this.pendingCid&&t.length>0&&t.find(e=>e.cid===this.pendingCid)&&(this.getConversationMessages([this.pendingCid]),this.pendingCid=null)}}},mounted(){this.startListeningEvent(),this.checkStatus(),this.getConversations();let t=document.getElementById("input-field");t.addEventListener("paste",this.handlePaste),t.addEventListener("keydown",(function(e){e.keyCode==13&&!e.shiftKey&&(e.preventDefault(),this.sendMessage())}).bind(this)),document.addEventListener("keyup",this.handleInputKeyUp);const s=localStorage.getItem("sidebarCollapsed");s!==null&&(this.sidebarCollapsed=JSON.parse(s))},beforeUnmount(){this.eventSource&&(this.eventSource.cancel(),console.log("SSEè¿æ¥å·²æ–­å¼€")),document.removeEventListener("keyup",this.handleInputKeyUp),this.sidebarHoverTimer&&clearTimeout(this.sidebarHoverTimer),this.cleanupMediaCache()},methods:{toggleSidebar(){if(this.sidebarHoverExpanded){this.sidebarHoverExpanded=!1;return}this.sidebarCollapsed=!this.sidebarCollapsed,localStorage.setItem("sidebarCollapsed",JSON.stringify(this.sidebarCollapsed))},handleSidebarMouseEnter(){this.sidebarCollapsed&&(this.sidebarHovered=!0,this.sidebarHoverTimer=setTimeout(()=>{this.sidebarHovered&&(this.sidebarHoverExpanded=!0,this.sidebarCollapsed=!1)},this.sidebarHoverDelay))},handleSidebarMouseLeave(){this.sidebarHovered=!1,this.sidebarHoverTimer&&(clearTimeout(this.sidebarHoverTimer),this.sidebarHoverTimer=null),this.sidebarHoverExpanded&&(this.sidebarCollapsed=!0),this.sidebarHoverExpanded=!1},showEditTitleDialog(t,s){this.editingCid=t,this.editingTitle=s||"",this.editTitleDialog=!0},saveTitle(){if(!this.editingCid)return;const t=this.editingTitle.trim();v.post("/api/chat/rename_conversation",{conversation_id:this.editingCid,title:t}).then(s=>{const e=this.conversations.find(a=>a.cid===this.editingCid);e&&(e.title=t),this.editTitleDialog=!1}).catch(s=>{console.error("é‡å‘½åå¯¹è¯å¤±è´¥:",s)})},async getMediaFile(t){if(this.mediaCache[t])return this.mediaCache[t];try{const s=await v.get("/api/chat/get_file",{params:{filename:t},responseType:"blob"}),e=URL.createObjectURL(s.data);return this.mediaCache[t]=e,e}catch(s){return console.error("Error fetching media file:",s),""}},async startListeningEvent(){const t=await fetch("/api/chat/listen",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}});if(!t.ok){console.error("SSEè¿æ¥å¤±è´¥:",t.statusText);return}const s=t.body.getReader(),e=new TextDecoder;this.eventSource=s;let a=!1,d=null;for(;;){const{done:p,value:o}=await s.read();if(p){console.log("SSEè¿æ¥å…³é—­");break}let y=e.decode(o,{stream:!0}).split(`

`);console.log("SSEæ•°æ®:",y);for(let w=0;w<y.length;w++){let E=y[w].trim();if(!E)continue;console.log(E);let u=JSON.parse(E.replace("data: ",""));if(u.type!=="heartbeat"){if(u.type==="error"){console.error("Error received:",u.data);continue}if(u.type==="image"){let _=u.data.replace("[IMAGE]",""),R={type:"bot",message:`<img src="${await this.getMediaFile(_)}" style="max-width: 80%; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);"/>`};this.messages.push(R)}else if(u.type==="record"){let _=u.data.replace("[RECORD]",""),R={type:"bot",message:`<audio controls class="audio-player">
                    <source src="${await this.getMediaFile(_)}" type="audio/wav">
                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
                  </audio>`};this.messages.push(R)}else if(u.type==="plain")a?d.message.value+=u.data:(d={type:"bot",message:B(u.data)},this.messages.push(d),a=!0);else if(u.type==="end"){a=!1;continue}else if(u.type==="update_title"){const _=this.conversations.find(S=>S.cid===u.cid);_&&(_.title=u.data)}else console.warn("æœªçŸ¥æ•°æ®ç±»å‹:",u.type);this.scrollToBottom()}}}},removeAudio(){this.stagedAudioUrl=null},checkStatus(){v.get("/api/chat/status").then(t=>{console.log(t.data),this.status=t.data.data}).catch(t=>{console.error(t)})},async startRecording(){const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.ondataavailable=s=>{this.audioChunks.push(s.data)},this.mediaRecorder.start(),this.isRecording=!0,this.inputFieldLabel="å½•éŸ³ä¸­ï¼Œè¯·è¯´è¯..."},async stopRecording(){this.isRecording=!1,this.inputFieldLabel="èŠå¤©å§!",this.mediaRecorder.stop(),this.mediaRecorder.onstop=async()=>{const t=new Blob(this.audioChunks,{type:"audio/wav"});this.audioChunks=[],this.mediaRecorder.stream.getTracks().forEach(e=>e.stop());const s=new FormData;s.append("file",t);try{const a=(await v.post("/api/chat/post_file",s,{headers:{"Content-Type":"multipart/form-data"}})).data.data.filename;console.log("Audio uploaded:",a),this.stagedAudioUrl=a}catch(e){console.error("Error uploading audio:",e)}}},async handlePaste(t){console.log("Pasting image...");const s=t.clipboardData.items;for(let e=0;e<s.length;e++)if(s[e].type.indexOf("image")!==-1){const a=s[e].getAsFile(),d=new FormData;d.append("file",a);try{const o=(await v.post("/api/chat/post_image",d,{headers:{"Content-Type":"multipart/form-data"}})).data.data.filename;this.stagedImagesName.push(o),this.stagedImagesUrl.push(URL.createObjectURL(a))}catch(p){console.error("Error uploading image:",p)}}},removeImage(t){this.stagedImagesName.splice(t,1),this.stagedImagesUrl.splice(t,1)},clearMessage(){this.prompt=""},getConversations(){v.get("/api/chat/conversations").then(t=>{this.conversations=t.data.data,this.pendingCid&&this.conversations.find(e=>e.cid===this.pendingCid)&&(this.getConversationMessages([this.pendingCid]),this.pendingCid=null)}).catch(t=>{t.response.status===401&&this.$router.push("/auth/login?redirect=/chatbox"),console.error(t)})},getConversationMessages(t){t[0]&&(this.$route.path!==`/chat/${t[0]}`&&this.$route.path!==`/chatbox/${t[0]}`&&(this.$route.path.startsWith("/chatbox")?k.push(`/chatbox/${t[0]}`):k.push(`/chat/${t[0]}`)),v.get("/api/chat/get_conversation?conversation_id="+t[0]).then(async s=>{this.currCid=t[0];let e=JSON.parse(s.data.data.history);for(let a=0;a<e.length;a++){if(e[a].message.startsWith("[IMAGE]")){let d=e[a].message.replace("[IMAGE]","");const p=await this.getMediaFile(d);e[a].message=`<img src="${p}" style="max-width: 80%; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);"/>`}if(e[a].message.startsWith("[RECORD]")){let d=e[a].message.replace("[RECORD]","");const p=await this.getMediaFile(d);e[a].message=`<audio controls class="audio-player">
                                    <source src="${p}" type="audio/wav">
                                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
                                  </audio>`}if(e[a].image_url&&e[a].image_url.length>0)for(let d=0;d<e[a].image_url.length;d++)e[a].image_url[d]=await this.getMediaFile(e[a].image_url[d]);e[a].audio_url&&(e[a].audio_url=await this.getMediaFile(e[a].audio_url))}this.messages=e}).catch(s=>{console.error(s)}))},async newConversation(){return v.get("/api/chat/new_conversation").then(t=>{const s=t.data.data.conversation_id;return this.currCid=s,this.$route.path.startsWith("/chatbox")?k.push(`/chatbox/${s}`):k.push(`/chat/${s}`),this.getConversations(),s}).catch(t=>{throw console.error(t),t})},newC(){this.currCid="",this.messages=[],this.$route.path.startsWith("/chatbox")?k.push("/chatbox"):k.push("/chat")},formatDate(t){const s=new Date(t*1e3),e={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return s.toLocaleString("zh-CN",e).replace(/\//g,"-").replace(/, /g," ")},deleteConversation(t){v.get("/api/chat/delete_conversation?conversation_id="+t).then(s=>{this.getConversations(),this.currCid="",this.messages=[]}).catch(s=>{console.error(s)})},async sendMessage(){this.currCid==""&&await this.newConversation();const t={type:"user",message:this.prompt,image_url:[],audio_url:null};if(this.stagedImagesName.length>0)for(let s=0;s<this.stagedImagesName.length;s++)if(this.stagedImagesName[s].startsWith("blob:"))t.image_url.push(this.stagedImagesName[s]);else{const e=await this.getMediaFile(this.stagedImagesName[s]);t.image_url.push(e)}this.stagedAudioUrl&&(this.stagedAudioUrl.startsWith("blob:")?t.audio_url=this.stagedAudioUrl:t.audio_url=await this.getMediaFile(this.stagedAudioUrl)),this.messages.push(t),this.scrollToBottom(),this.loadingChat=!0,fetch("/api/chat/send",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({message:this.prompt,conversation_id:this.currCid,image_url:this.stagedImagesName,audio_url:this.stagedAudioUrl?[this.stagedAudioUrl]:[]})}).then(s=>{this.prompt="",this.stagedImagesName=[],this.stagedAudioUrl="",this.loadingChat=!1}).catch(s=>{console.error(s)})},scrollToBottom(){this.$nextTick(()=>{const t=this.$refs.messageContainer;t.scrollTop=t.scrollHeight})},handleInputKeyDown(t){if(t.keyCode===17){if(this.ctrlKeyDown)return;this.ctrlKeyDown=!0,this.ctrlKeyTimer=setTimeout(()=>{this.ctrlKeyDown&&!this.isRecording&&this.startRecording()},this.ctrlKeyLongPressThreshold)}},handleInputKeyUp(t){t.keyCode===17&&(this.ctrlKeyDown=!1,this.ctrlKeyTimer&&(clearTimeout(this.ctrlKeyTimer),this.ctrlKeyTimer=null),this.isRecording&&this.stopRecording())},cleanupMediaCache(){Object.values(this.mediaCache).forEach(t=>{t.startsWith("blob:")&&URL.revokeObjectURL(t)}),this.mediaCache={}}}},Je=Object.assign(Oe,{props:{chatboxMode:{type:Boolean,default:!1}},setup(t){const s=t;return N.setOptions({breaks:!0}),(e,a)=>(l(),c(T,null,[r(I,{class:"chat-page-card"},{default:n(()=>[r(L,{class:"chat-page-container"},{default:n(()=>{var d,p;return[i("div",te,[i("div",{class:D(["sidebar-panel",{"sidebar-collapsed":e.sidebarCollapsed}]),onMouseenter:a[1]||(a[1]=(...o)=>e.handleSidebarMouseEnter&&e.handleSidebarMouseEnter(...o)),onMouseleave:a[2]||(a[2]=(...o)=>e.handleSidebarMouseLeave&&e.handleSidebarMouseLeave(...o))},[s.chatboxMode?(l(),c("div",se,[ae,e.sidebarCollapsed?h("",!0):(l(),c("span",ie,"AstrBot"))])):h("",!0),i("div",oe,[r(g,{icon:"",class:"sidebar-collapse-btn",onClick:e.toggleSidebar,variant:"text",color:"deep-purple"},{default:n(()=>[r(f,null,{default:n(()=>[m(M(e.sidebarCollapsed||!e.sidebarCollapsed&&e.sidebarHoverExpanded?"mdi-chevron-right":"mdi-chevron-left"),1)]),_:1})]),_:1},8,["onClick"])]),i("div",re,[e.sidebarCollapsed?h("",!0):(l(),b(g,{key:0,rounded:"lg",class:"new-chat-btn",onClick:e.newC,disabled:!e.currCid,"prepend-icon":"mdi-plus"},{default:n(()=>[m("åˆ›å»ºå¯¹è¯")]),_:1},8,["onClick","disabled"])),e.sidebarCollapsed?(l(),b(g,{key:1,icon:"mdi-plus",rounded:"lg",onClick:e.newC,disabled:!e.currCid,elevation:"0"},null,8,["onClick","disabled"])):h("",!0)]),e.sidebarCollapsed?h("",!0):(l(),c("div",{key:1,style:{"overflow-y":"auto"},class:D({"fade-in":e.sidebarHoverExpanded})},[e.conversations.length>0?(l(),b(I,{key:0,class:"conversation-list-card",flat:""},{default:n(()=>[r(O,{density:"compact",nav:"",class:"conversation-list","onUpdate:selected":e.getConversationMessages},{default:n(()=>[(l(!0),c(T,null,U(e.conversations,(o,C)=>(l(),b(j,{key:o.cid,value:o.cid,rounded:"lg",class:"conversation-item","active-color":"secondary"},P({default:n(()=>[e.sidebarCollapsed?h("",!0):(l(),b(J,{key:0,class:"conversation-title"},{default:n(()=>[m(M(o.title||"æ–°å¯¹è¯"),1)]),_:2},1024))]),_:2},[e.sidebarCollapsed?void 0:{name:"append",fn:n(()=>[r(g,{icon:"mdi-pencil",size:"x-small",variant:"text",class:"edit-title-btn",onClick:W(y=>e.showEditTitleDialog(o.cid,o.title),["stop"])},null,8,["onClick"])]),key:"0"}]),1032,["value"]))),128))]),_:1},8,["onUpdate:selected"])]),_:1})):h("",!0),r(G,null,{default:n(()=>[e.conversations.length===0?(l(),c("div",ne,[r(f,{icon:"mdi-message-text-outline",size:"large",color:"grey-lighten-1"}),!e.sidebarCollapsed||e.sidebarHoverExpanded?(l(),c("div",le," æš‚æ— å¯¹è¯å†å²")):h("",!0)])):h("",!0)]),_:1})],2)),e.sidebarCollapsed?h("",!0):(l(),c("div",{key:2,style:{padding:"16px","padding-bottom":"0px"},class:D({"fade-in":e.sidebarHoverExpanded})},[de,i("div",ce,[r(V,{class:"status-chip",color:(d=e.status)!=null&&d.llm_enabled?"primary":"grey-lighten-2",variant:"elevated",size:"small"},{prepend:n(()=>{var o;return[r(f,{icon:(o=e.status)!=null&&o.llm_enabled?"mdi-check-circle":"mdi-alert-circle",size:"x-small"},null,8,["icon"])]}),default:n(()=>[he]),_:1},8,["color"]),r(V,{class:"status-chip",color:(p=e.status)!=null&&p.stt_enabled?"success":"grey-lighten-2",variant:"elevated",size:"small"},{prepend:n(()=>{var o;return[r(f,{icon:(o=e.status)!=null&&o.stt_enabled?"mdi-check-circle":"mdi-alert-circle",size:"x-small"},null,8,["icon"])]}),default:n(()=>[ue]),_:1},8,["color"])]),e.currCid?(l(),b(g,{key:0,variant:"tonal",rounded:"lg",class:"delete-chat-btn",onClick:a[0]||(a[0]=o=>e.deleteConversation(e.currCid)),color:"error",density:"comfortable",size:"small"},{default:n(()=>[r(f,{start:"",size:"small"},{default:n(()=>[m("mdi-delete")]),_:1}),m(" åˆ é™¤æ­¤å¯¹è¯ ")]),_:1})):h("",!0)],2))],34),i("div",pe,[i("div",ge,[e.currCid&&e.getCurrentConversation?(l(),c("div",me,[i("h2",ve,M(e.getCurrentConversation.title||"æ–°å¯¹è¯"),1),i("div",fe,M(e.formatDate(e.getCurrentConversation.updated_at)),1)])):h("",!0),i("div",be,[s.chatboxMode?h("",!0):(l(),b(f,{key:0,onClick:a[3]||(a[3]=o=>A(k).push("/chatbox")),class:"fullscreen-icon"},{default:n(()=>[m("mdi-fullscreen")]),_:1}))])]),e.currCid&&e.getCurrentConversation?(l(),b(x,{key:0,class:"conversation-divider"})):h("",!0),i("div",Ce,[e.messages.length==0?(l(),c("div",ye,Me)):(l(),c("div",Ue,[(l(!0),c(T,null,U(e.messages,(o,C)=>(l(),c("div",{class:"message-item fade-in",key:C},[o.type=="user"?(l(),c("div",Ee,[i("div",Se,[i("span",null,M(o.message),1),o.image_url&&o.image_url.length>0?(l(),c("div",Re,[(l(!0),c(T,null,U(o.image_url,(y,w)=>(l(),c("div",{key:w,class:"image-attachment"},[i("img",{src:y,class:"attached-image"},null,8,Ie)]))),128))])):h("",!0),o.audio_url&&o.audio_url.length>0?(l(),c("div",De,[i("audio",Ve,[i("source",{src:o.audio_url,type:"audio/wav"},null,8,Le),m(" æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚ ")])])):h("",!0)]),r(H,{class:"user-avatar",color:"deep-purple-lighten-3",size:"36"},{default:n(()=>[r(f,{icon:"mdi-account"})]),_:1})])):(l(),c("div",Ae,[r(H,{class:"bot-avatar",color:"deep-purple",size:"36"},{default:n(()=>[He]),_:1}),i("div",$e,[i("div",{innerHTML:A(N)(o.message),class:"markdown-content"},null,8,Ke)])]))]))),128))]))],512),i("div",Fe,[r($,{autocomplete:"off",id:"input-field",variant:"outlined",modelValue:e.prompt,"onUpdate:modelValue":a[5]||(a[5]=o=>e.prompt=o),label:e.inputFieldLabel,placeholder:"å¼€å§‹è¾“å…¥...",loading:e.loadingChat,"clear-icon":"mdi-close-circle",clearable:"","onClick:clear":e.clearMessage,class:"message-input",onKeydown:e.handleInputKeyDown,"hide-details":""},{loader:n(()=>[r(Q,{active:e.loadingChat,height:"3",color:"deep-purple",indeterminate:""},null,8,["active"])]),append:n(()=>[r(K,{text:"å‘é€"},{activator:n(({props:o})=>[r(g,F(o,{onClick:e.sendMessage,class:"send-btn",icon:"mdi-send",variant:"text",color:"deep-purple",disabled:!e.prompt&&e.stagedImagesName.length===0&&!e.stagedAudioUrl}),null,16,["onClick","disabled"])]),_:1}),r(K,{text:"è¯­éŸ³è¾“å…¥"},{activator:n(({props:o})=>[r(g,F(o,{onClick:a[4]||(a[4]=C=>e.isRecording?e.stopRecording():e.startRecording()),class:"record-btn",icon:e.isRecording?"mdi-stop-circle":"mdi-microphone",variant:"text",color:e.isRecording?"error":"deep-purple"}),null,16,["icon","color"])]),_:1})]),_:1},8,["modelValue","label","loading","onClick:clear","onKeydown"]),e.stagedImagesUrl.length>0||e.stagedAudioUrl?(l(),c("div",Ne,[(l(!0),c(T,null,U(e.stagedImagesUrl,(o,C)=>(l(),c("div",{key:C,class:"image-preview"},[i("img",{src:o,class:"preview-image"},null,8,ze),r(g,{onClick:y=>e.removeImage(C),class:"remove-attachment-btn",icon:"mdi-close",size:"small",color:"error",variant:"text"},null,8,["onClick"])]))),128)),e.stagedAudioUrl?(l(),c("div",Be,[r(V,{color:"deep-purple-lighten-4",class:"audio-chip"},{default:n(()=>[r(f,{start:"",icon:"mdi-microphone",size:"small"}),m(" æ–°å½•éŸ³ ")]),_:1}),r(g,{onClick:e.removeAudio,class:"remove-attachment-btn",icon:"mdi-close",size:"small",color:"error",variant:"text"},null,8,["onClick"])])):h("",!0)])):h("",!0)])])])]}),_:1})]),_:1}),r(z,{modelValue:e.editTitleDialog,"onUpdate:modelValue":a[8]||(a[8]=d=>e.editTitleDialog=d),"max-width":"400"},{default:n(()=>[r(I,null,{default:n(()=>[r(Y,{class:"dialog-title"},{default:n(()=>[m("ç¼–è¾‘å¯¹è¯æ ‡é¢˜")]),_:1}),r(L,null,{default:n(()=>[r($,{modelValue:e.editingTitle,"onUpdate:modelValue":a[6]||(a[6]=d=>e.editingTitle=d),label:"å¯¹è¯æ ‡é¢˜",variant:"outlined","hide-details":"",class:"mt-2",onKeyup:q(e.saveTitle,["enter"]),autofocus:""},null,8,["modelValue","onKeyup"])]),_:1}),r(X,null,{default:n(()=>[r(Z),r(g,{text:"",onClick:a[7]||(a[7]=d=>e.editTitleDialog=!1),color:"grey-darken-1"},{default:n(()=>[m("å–æ¶ˆ")]),_:1}),r(g,{text:"",onClick:e.saveTitle,color:"primary"},{default:n(()=>[m("ä¿å­˜")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{Je as default};
